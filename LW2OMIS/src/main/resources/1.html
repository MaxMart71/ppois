<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planti</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        input:invalid {
            border-color: #e74c3c; /* Красный цвет для неправильного ввода */
        }
        input:valid {
            border-color: #2ecc71; /* Зеленый цвет для правильного ввода */
        }
        .error-message {
            color: #e74c3c;
            font-size: 12px;
            display: none;
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>Welcome to Planti!</h1>
    </header>
    <main>
        <div class="form-container">
            <form id="authForm" novalidate>
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="Enter your email" required>
                <div id="emailError" class="error-message">Please enter a valid email address.</div>

                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password" required>

                <button id="signinButton" type="button" class="signin" disabled>Sign In</button>
                <button id="registerButton" type="button" class="button" disabled>Register</button>
            </form>
        </div>
        <div class="date-picker">
            <h2>Select date</h2>
            <label for="date">Enter date</label>
            <input type="date" id="date">
            <div class="date-buttons">
                <button class="cancel">Cancel</button>
                <button class="ok">OK</button>
            </div>
        </div>
    </main>
    <footer>
        <a href="#" class="worker-login">Enter as a worker →</a>
    </footer>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('authForm');
        const signinButton = document.getElementById('signinButton');
        const registerButton = document.getElementById('registerButton');
        const emailInput = document.getElementById('email');
        const emailError = document.getElementById('emailError');
        const passwordInput = document.getElementById('password');

        // Проверка заполненности формы
        form.addEventListener('input', function () {
            const emailIsValid = emailInput.validity.valid;
            const passwordIsValid = passwordInput.value.trim() !== '';
            const allFieldsFilled = emailInput.value.trim() !== '' && passwordIsValid;

            // Показать или скрыть сообщение об ошибке в email
            if (!emailIsValid && emailInput.value.trim() !== '') {
                emailError.style.display = 'block';
            } else {
                emailError.style.display = 'none';
            }

            // Активируем кнопки, если все поля заполнены и email корректный
            const shouldEnableButtons = allFieldsFilled && emailIsValid;
            signinButton.disabled = !shouldEnableButtons;
            registerButton.disabled = !shouldEnableButtons;

            console.log('Button states:', {
                signinButtonDisabled: signinButton.disabled,
                registerButtonDisabled: registerButton.disabled
            });
        });

        // Обработчики кликов с дополнительными логами
        signinButton.addEventListener('click', function () {
            console.log('Signin button clicked');
            if (!signinButton.disabled) {
                console.log('Navigating to 2.html from Sign In button');
                window.location.replace('2.html'); // Используем replace, чтобы проверить переход
            } else {
                console.log('Signin button is disabled');
            }
        });

        registerButton.addEventListener('click', function () {
            console.log('Register button clicked');
            if (!registerButton.disabled) {
                console.log('Navigating to 2.html from Register button');
                window.location.replace('2.html'); // Используем replace для перехода
            } else {
                console.log('Register button is disabled');
            }
        });
    });
</script>
</body>
</html>
